@page "~/Channels/{handler?}"
@using NodaTime.Text
@model Index
@{
    ViewData["Title"] = SharedResources.Channels;
}

@section Navigation
{
    <partial name="Shared/_Navigation" model="@Model"/>
}

<table class="table">
    <thead>
    <tr>
        <th>@SharedResources.Name</th>
        <th>@SharedResources.Subscribed</th>
        <th>@SharedResources.Filters_Availability</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var channel in Model.Channels)
    {
        <tr>
            <td>
                <a asp-page="/Channels/Channel" asp-route-channelId="@channel.Id">
                    @channel.Name
                </a>
            </td>
            <td>
                @if (channel.SubscribedAt is { } time)
                {
                    <time datetime="@InstantPattern.General.Format(time)">
                        @LocalDatePattern.Iso.Format(time.InUtc().Date)
                    </time>
                }
                else
                {
                    <span>-</span>
                }
            </td>
            <td>
                <a href="@channel.ExternalUrl">@channel.Availability.LocalizedName</a>
            </td>
        </tr>
    }
    </tbody>
</table>

<div class="row">
    <div class="col-12 col-sm-4 col-lg-3 col-xxl-2">
        <a asp-page="/Channels/Create" class="btn btn-primary w-100" type="button">
            @SharedResources.Button_CreateChannel
        </a>
    </div>
</div>
