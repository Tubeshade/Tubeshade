@page "~/Tasks/{handler?}"
@model Index
@{
    ViewData["Title"] = SharedResources.Tasks;
}

@section Navigation
{
    <partial name="Shared/_Navigation" model="@Model"/>
}

<div class="btn-group">
    <button hx-post="" hx-page-handler="ScanSubscriptions" class="btn btn-primary" type="button">
        @SharedResources.Button_ScanSubscriptions
    </button>
    <button hx-post="" hx-page-handler="ScanSegments" class="btn btn-primary" type="button">
        @SharedResources.Button_ScanSponsorBlock
    </button>
</div>

<partial name="Tasks/_FilteredTasks" model="@Model"/>

@section Scripts
{
    <script>
        function onPollingChanged() {
            const input = document.querySelector("#task-polling");
            const tasks = document.querySelector("#tasks");

            if (input.checked) {
                tasks.removeAttribute("hx-disable");
            } else {
                tasks.setAttribute("hx-disable", "true");
            }
        }
    </script>
}
